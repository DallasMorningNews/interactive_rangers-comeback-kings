{"version":3,"sources":["+custom.js"],"names":["$","document","ready","drawGameLogs","data","target","d3","select","html","console","log","gameLogs","selectAll","enter","append","attr","d","one_run_win","one_run_loss","drawWinsLosses","empty","i","wins","losses","simFormat","opponent","teamIndex","oneRunners","adjustedStandings","standings","each","k","v","push","_","findIndex","o","team","runSim","rate","n","Math","random","Date","year","getFullYear","text","getJSON","texWL","oppWL","change","selectedTeam","this","children","mascot"],"mappings":"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","file":"scripts-bundle.js","sourcesContent":["$(document).ready(function() {\n\n\t//custom scripting goes here\n\n\t// injecting current year into footer\n\t// DO NOT DELETE\n\n\tvar d = new Date();\n\tvar year = d.getFullYear();\n\n\t$('.copyright').text(year);\n\n\n\tvar standings = [\n\t\t{\n\t\t\t\"team\": \"Rangers\",\n\t\t\t\"wins\": 88,\n\t\t\t\"losses\": 62\n\t\t},\n\t\t{\n\t\t\t\"team\": \"Mariners\",\n\t\t\t\"wins\": 79,\n\t\t\t\"losses\": 70\n\t\t},\n\t\t{\n\t\t\t\"team\": \"Astros\",\n\t\t\t\"wins\": 78,\n\t\t\t\"losses\": 71\n\t\t},\n\t\t{\n\t\t\t\"team\": \"Athletics\",\n\t\t\t\"wins\": 66,\n\t\t\t\"losses\": 83\n\t\t},\n\t\t{\n\t\t\t\"team\": \"Angels\",\n\t\t\t\"wins\": 65,\n\t\t\t\"losses\": 84\n\t\t}\n\t];\n\n\n\t$.getJSON(\"/assets/python-scripts/json/rangers-game-logs.json\", function(data) {\n\n\t\tvar texWL = {\n\t\t\t\"wins\": 0,\n\t\t\t\"losses\": 0\n\t\t};\n\n\t\t$.each(data, function(k, v) {\n\t\t\tif (v.one_run_win === true) {\n\t\t\t\ttexWL.wins ++;\n\t\t\t} else if (v.one_run_loss === true) {\n\t\t\t\ttexWL.losses ++;\n\t\t\t}\n\t\t});\n\n\t\tdrawGameLogs(data, \"#tex-game-log-chart\");\n\t\tdrawWinsLosses(texWL, \"#tex-wins-losses\");\n\n\t\tsimFormat(data);\n\n\t});\n\n\t$.getJSON(\"/assets/python-scripts/json/team-skeds/LAA-game-logs.json\", function(data) {\n\n\t\tvar oppWL = {\n\t\t\t\"wins\": 0,\n\t\t\t\"losses\": 0\n\t\t};\n\n\t\t$.each(data, function(k, v) {\n\t\t\tif (v.one_run_win === true) {\n\t\t\t\toppWL.wins ++;\n\t\t\t} else if (v.one_run_loss === true) {\n\t\t\t\toppWL.losses ++;\n\t\t\t}\n\t\t});\n\n\n\t\tdrawGameLogs(data, \"#opp-game-log-chart\");\n\t\tdrawWinsLosses(oppWL, \"#opp-wins-losses\");\n\n\t});\n\n\tfunction drawGameLogs(data, target) {\n\t\td3.select(target).html(\"\");\n\n\t\tconsole.log(data);\n\t\tvar gameLogs = d3.select(target).selectAll(\".game-log\")\n\t\t\t.data(data);\n\n\t\t\tgameLogs.enter().append(\"span\")\n\t\t\t\t.attr(\"class\", function(d) {\n\t\t\t\t\tif (d.one_run_win === true) {\n\t\t\t\t\t\treturn (\"game-log one-run-win\");\n\t\t\t\t\t} else if (d.one_run_loss === true) {\n\t\t\t\t\t\treturn (\"game-log one-run-loss\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn (\"game-log\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t}\n\n\tfunction drawWinsLosses(data, target) {\n\n\t\t$(target).empty();\n\n\t\tfor (i=0; i<data.wins; i++) {\n\t\t\t$(target).append(\"<span class='game-log one-run-win'></span>\");\n\t\t}\n\n\t\tfor (i=0; i<data.losses; i++) {\n\t\t\t$(target).append(\"<span class='game-log one-run-loss'></span>\");\n\t\t}\n\n\t}\n\n\n\n\n\n\n\n\n\n\n\tfunction simFormat(data) {\n\n\t\tvar oneRunners = [];\n\t\tvar adjustedStandings = standings;\n\n\t\tvar opponent, teamIndex;\n\n\t\t$.each(data, function(k,v) {\n\t\t\tif (v.one_run_win === true) {\n\t\t\t\toneRunners.push(v);\n\t\t\t\tadjustedStandings[0].wins--;\n\n\t\t\t\topponent = v.opponent;\n\n\t\t\t\tteamIndex = _.findIndex(adjustedStandings, function(o) {return o.team == opponent;});\n\n\t\t\t\tif (teamIndex !== -1) {\n\t\t\t\t\tadjustedStandings[teamIndex].losses--;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (v.one_run_loss === true) {\n\t\t\t\toneRunners.push(v);\n\t\t\t\tadjustedStandings[0].losses--;\n\n\t\t\t\topponent = v.opponent;\n\n\t\t\t\tteamIndex = _.findIndex(adjustedStandings, function(o) {return o.team == opponent;});\n\n\t\t\t\tif (teamIndex !== -1) {\n\t\t\t\t\tadjustedStandings[teamIndex].wins--;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\n\n\t\trunSim(oneRunners, adjustedStandings, 50);\n\t}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\tfunction runSim(data, standings, rate) {\n\n\t\tconsole.log(standings);\n\t\trate = rate / 100;\n\n\t\tconsole.log(rate);\n\t\tvar opponent, teamIndex;\n\n\t\t$.each(data, function(k,v) {\n\n\t\t\tvar currentOutcome;\n\n\t\t\tvar n = Math.random();\n\t\t\tif (n <= rate) {\n\t\t\t\tstandings[0].wins++;\n\n\t\t\t\topponent = v.opponent;\n\t\t\t\tteamIndex = _.findIndex(standings, function(o) {return o.team == opponent;});\n\n\t\t\t\tif (teamIndex !== -1) {\n\t\t\t\t\tadjustedStandings[teamIndex].losses++;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tstandings[0].losses++;\n\n\t\t\t\topponent = v.opponent;\n\t\t\t\tteamIndex = _.findIndex(standings, function(o) {return o.team == opponent;});\n\n\t\t\t\tif (teamIndex !== -1) {\n\t\t\t\t\tadjustedStandings[teamIndex].wins++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\n\t\tconsole.log(standings);\n\t}\n\n\n\t$(\"#opponents-selector select\").change(function() {\n\t\tvar selectedTeam = $(this).children(\"option:selected\").attr(\"data-team\");\n\t\tconsole.log(selectedTeam);\n\n\t\tvar mascot = $(this).children(\"option:selected\").text();\n\n\t\t$(\"#opp-game-logs h5\").text(mascot);\n\n\t\t$.getJSON(\"/assets/python-scripts/json/team-skeds/\"+selectedTeam+\"-game-logs.json\", function(data) {\n\n\t\t\tvar oppWL = {\n\t\t\t\t\"wins\": 0,\n\t\t\t\t\"losses\": 0\n\t\t\t};\n\n\t\t\t$.each(data, function(k, v) {\n\t\t\t\tif (v.one_run_win === true) {\n\t\t\t\t\toppWL.wins ++;\n\t\t\t\t} else if (v.one_run_loss === true) {\n\t\t\t\t\toppWL.losses ++;\n\t\t\t\t}\n\t\t\t});\n\t\t\tdrawGameLogs(data, \"#opp-game-log-chart\");\n\t\t\tdrawWinsLosses(oppWL, \"#opp-wins-losses\");\n\n\t\t});\n\n\t});\n\n\n});\n"],"sourceRoot":"/source/"}